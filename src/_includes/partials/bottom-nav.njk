{# =============================================================================
  partials/bottom-nav.njk
  ------------------------------------------------------------------------------
  PURPOSE
  - Mobile-only bottom navigation.
  - Styled like a 2-option segmented control ("slider") between:
      1) Search
      2) Identify

  WHY THIS FILE WAS UPDATED
  - Some Nunjucks environments choke on JS-style expressions like:
      page.url.startsWith(...)
      condition ? a : b
  - This version avoids method calls and ternaries completely.

  IMPORTANT
  - No inline CSS.
  - The slider effect is driven by:
      * data-active attribute on <nav>
      * CSS transform on .bottom-nav-indicator
============================================================================= #}

{# ---------------------------------------------------------------------------
  Determine whether we are on an Identify page.
  We avoid startsWith() and use replace() + compare instead:
    If replacing "/identify/" changes the string, then it contained "/identify/".
--------------------------------------------------------------------------- #}
{% set currentUrl = page and page.url ? page.url : "" %}
{% set urlWithoutIdentify = currentUrl | replace("/identify/", "") %}
{% set isIdentify = (currentUrl != urlWithoutIdentify) %}

<nav
  class="bottom-nav"
  aria-label="Primary (mobile)"
  data-active="{% if isIdentify %}identify{% else %}search{% endif %}"
>
  {# Sliding background indicator (purely presentational) #}
  <span class="bottom-nav-indicator" aria-hidden="true"></span>

  <a
    class="bottom-nav-link"
    href="/"
    {% if currentUrl == "/" %}aria-current="page"{% endif %}
  >
    Search
  </a>

  <a
    class="bottom-nav-link"
    href="/identify/"
    {% if isIdentify %}aria-current="page"{% endif %}
  >
    Identify
  </a>
</nav>
