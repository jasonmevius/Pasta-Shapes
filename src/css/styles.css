/* =============================================================================
  styles.css
  -----------------------------------------------------------------------------
  Single global stylesheet for the entire site.

  Notes:
  - No inline CSS in templates.
  - Heavily commented for future-proofing.
============================================================================= */

:root{
  --bg: #ffffff;
  --fg: #111827;
  --muted: #6b7280;
  --card: #f9fafb;
  --border: #e5e7eb;

  --radius: 14px;
  --container: 56rem;
  --pad: 1rem;
  --gap: 0.75rem;
}

*{ box-sizing: border-box; }
html, body{ height: 100%; }

/* -----------------------------------------------------------------------------
  IMPORTANT: make the HTML hidden attribute bulletproof.
----------------------------------------------------------------------------- */
[hidden]{ display: none !important; }

body{
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  background: var(--bg);
  color: var(--fg);
  line-height: 1.45;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a{ color: inherit; }
a:hover{ text-decoration: underline; }

/* -----------------------------------------------------------------------------
  Accessibility: skip link
----------------------------------------------------------------------------- */
.skip{
  position: absolute;
  left: -999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}
.skip:focus{
  left: 1rem;
  top: 1rem;
  width: auto;
  height: auto;
  padding: 0.5rem 0.75rem;
  background: var(--fg);
  color: var(--bg);
  border-radius: 10px;
  z-index: 1000;
}

/* -----------------------------------------------------------------------------
  Accessibility: screen-reader-only utility
----------------------------------------------------------------------------- */
.sr-only{
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0,0,0,0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* -----------------------------------------------------------------------------
  Layout container
----------------------------------------------------------------------------- */
.container{
  max-width: var(--container);
  margin: 0 auto;
  padding: 1.25rem var(--pad) 3rem;
}

/* Leave room for fixed bottom nav on mobile so content is never hidden underneath */
@media (max-width: 719px){
  .container{
    padding-bottom: 5rem;
  }
}

/* =============================================================================
  Top header (sticky) + mobile hamburger
============================================================================= */

.topbar{
  position: sticky;
  top: 0;
  z-index: 50;
  background: rgba(255,255,255,0.92);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--border);
}

.topbar-inner{
  max-width: var(--container);
  margin: 0 auto;
  padding: 0.75rem var(--pad);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--gap);
}

.brand{
  font-weight: 700;
  letter-spacing: -0.01em;
  text-decoration: none;
}
.brand:hover{ text-decoration: none; }

.nav{
  display: flex;
  gap: 0.75rem;
  align-items: center;
  color: var(--muted);
  font-size: 0.95rem;
}

.nav a{ text-decoration: none; }
.nav a[aria-current="page"]{
  color: var(--fg);
  font-weight: 600;
}

/* Desktop nav shown only on wider screens */
@media (max-width: 719px){
  .nav-desktop{ display: none; }
}
@media (min-width: 720px){
  .nav-desktop{ display: flex; }
}

/* -----------------------------------------------------------------------------
  Mobile hamburger button (shown only on small screens)
----------------------------------------------------------------------------- */
.nav-toggle{
  display: inline-flex;
  align-items: center;
  justify-content: center;

  width: 42px;
  height: 42px;

  border: 1px solid var(--border);
  border-radius: 12px;
  background: #fff;
  color: var(--fg);

  cursor: pointer;
}

.nav-toggle:hover{
  background: rgba(17,24,39,0.03);
}

.nav-toggle-bars{
  display: grid;
  gap: 5px;
}

.nav-toggle-bars span{
  display: block;
  width: 18px;
  height: 2px;
  background: var(--fg);
  border-radius: 999px;
}

/* =============================================================================
  Cards
============================================================================= */

.card{
  border: 1px solid var(--border);
  background: var(--card);
  border-radius: var(--radius);
  padding: 0.9rem;
}

/* =============================================================================
  Buttons
============================================================================= */

.btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.7rem 0.9rem;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--fg);
  color: var(--bg);
  font-weight: 600;
  cursor: pointer;
  text-decoration: none;
}
.btn:hover{ text-decoration: none; }

/* Secondary button variant (legacy + alias for templates) */
.btn.secondary,
.btn--secondary{
  background: #fff;
  color: var(--fg);
}
.btn.secondary:hover,
.btn--secondary:hover{
  background: rgba(17,24,39,0.03);
}

.btn-small{
  padding: 0.55rem 0.75rem;
  border-radius: 10px;
  font-size: 0.95rem;
}

/* =============================================================================
  Forms (shared)
============================================================================= */

.field{
  display: grid;
  gap: 0.35rem;
  min-width: 0; /* prevents grid blowouts when long text appears */
}

.field__label{
  font-weight: 650;
  font-size: 0.95rem;
}

/* Inputs and selects share the same “pill-ish” look */
.field__input,
.field__select{
  width: 100%;
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 0.85rem 0.9rem;
  font-size: 1rem;
  background: #fff;
  color: var(--fg);
}

.field__input:focus,
.field__select:focus{
  outline: 2px solid rgba(17,24,39,0.18);
  outline-offset: 2px;
}

/* =============================================================================
  Page headers (used by All Pastas and other content pages)
============================================================================= */

.page-header{
  display: grid;
  gap: 0.25rem;
  margin-bottom: 1rem;
}

.page-header h1{
  margin: 0;
  letter-spacing: -0.02em;
}

.page-subtitle{
  margin: 0;
  color: var(--muted);
}

/* =============================================================================
  All Pastas page: tools + table styling
  -----------------------------------------------------------------------------
  Goals for Jason’s notes:
  1) Reduce cramped feel above the table
  2) Remove “Thumb” label but keep structure
  3) Left-align body row pasta names (th defaults to centered in browsers)
  4) Make sortable headers visually look clickable
  5) Make header row sticky to the top of the viewport when scrolling the page
============================================================================= */

.table-tools{
  margin: 1rem 0 0.75rem;
}

.table-tools__row{
  display: grid;
  gap: var(--gap);
  align-items: end;
}

/* Mobile: stack fields */
@media (max-width: 719px){
  .table-tools__row{
    grid-template-columns: 1fr;
  }
}

/* Tablet/desktop: two fields + meta panel */
@media (min-width: 720px){
  .table-tools__row{
    grid-template-columns: 1.4fr 1fr auto;
  }
}

.table-meta{
  display: grid;
  gap: 0.5rem;
  justify-items: end;
  text-align: right;
}

.table-meta__count{
  color: var(--muted);
  font-size: 0.95rem;
}

/* -----------------------------------------------------------------------------
  Table container
  - Keep horizontal scrolling available on small screens.
  - IMPORTANT: use overflow-x only, not overflow: auto;
    overflow: auto creates a scroll container that can break sticky headers
    relative to the viewport.
----------------------------------------------------------------------------- */
.table-wrap{
  margin-top: 0.75rem;

  overflow-x: auto;
  overflow-y: visible;

  -webkit-overflow-scrolling: touch;
  border: 1px solid var(--border);
  border-radius: calc(var(--radius) + 2px);
  background: #fff;
}

/* Base table styling */
.data-table{
  width: 100%;
  border-collapse: collapse;

  /* Prevent “content-sized columns” cramped look */
  table-layout: fixed;
}

/* Column widths via <colgroup> for All Pastas */
.data-table--all .col-thumb{ width: 84px; }
.data-table--all .col-name{ width: 16rem; }
.data-table--all .col-category{ width: 11rem; }
/* col-synonyms intentionally left flexible to fill remaining space */

/* -----------------------------------------------------------------------------
  Sticky header row
  - Sticky to the viewport top while the page scrolls.
  - The topbar is also sticky; we add an offset so the table header
    sits just under the topbar instead of hiding behind it.

  If you later change topbar height, update --table-sticky-offset.
----------------------------------------------------------------------------- */
:root{
  --table-sticky-offset: 58px; /* approx topbar height incl. border */
}

.data-table thead th{
  position: sticky;
  top: var(--table-sticky-offset);
  z-index: 5;

  background: #fff;
  text-align: left;
  font-size: 0.9rem;
  color: var(--muted);
  font-weight: 700;
  letter-spacing: -0.01em;

  border-bottom: 1px solid var(--border);
  padding: 0.85rem 0.9rem;
}

/* Subtle shadow so the sticky row reads as “floating” */
.data-table thead th{
  box-shadow: 0 1px 0 rgba(17,24,39,0.06);
}

.data-table tbody td,
.data-table tbody th{
  border-bottom: 1px solid var(--border);
  padding: 0.85rem 0.9rem;
  vertical-align: middle;
}

.data-table tbody tr:hover{
  background: rgba(17,24,39,0.02);
}

/* Thumb column */
.data-table__thumb{
  width: 84px;
}

/* -----------------------------------------------------------------------------
  IMPORTANT: Left-align pasta names in body rows
  - Because they’re <th scope="row">, browsers often center them by default.
----------------------------------------------------------------------------- */
.data-table__name,
.data-table tbody th{
  text-align: left;
}

.data-table__name a{
  text-decoration: none;
  font-weight: 700;
  letter-spacing: -0.01em;
}
.data-table__name a:hover{
  text-decoration: underline;
}

/* Category cell */
.cell-category{
  color: var(--muted);
}

/* Synonyms cell */
.cell-synonyms{
  color: var(--muted);
  font-size: 0.92rem;
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
}

.synonyms--empty{
  color: rgba(107,114,128,0.65);
}

/* Alignment helpers */
.data-table__left{ text-align: left; }

/* -----------------------------------------------------------------------------
  Sortable headers: make them look interactive
  - Underline style + small “sort glyph” so users know these are clickable.
  - We style based on aria-sort which your JS can update.
----------------------------------------------------------------------------- */
.data-table__sortable{
  cursor: pointer;
  user-select: none;

  /* Visual cue: subtle dotted underline */
  text-decoration: underline;
  text-decoration-style: dotted;
  text-decoration-thickness: 1px;
  text-underline-offset: 3px;
}

.data-table__sortable:hover{
  color: var(--fg);
}

.sort-indicator{
  display: inline-block;
  width: 1.1em;
  height: 1.1em;
  margin-left: 0.25rem;
  opacity: 0.75;
  vertical-align: -0.15em;
}

/* Default (unsorted): show a neutral sort glyph */
.data-table__sortable[aria-sort="none"] .sort-indicator::before{
  content: "⇅";
}

/* Ascending / Descending: show direction */
.data-table__sortable[aria-sort="ascending"] .sort-indicator::before{
  content: "↑";
}
.data-table__sortable[aria-sort="descending"] .sort-indicator::before{
  content: "↓";
}

/* =============================================================================
  Footer
============================================================================= */

.site-footer{
  border-top: 1px solid var(--border);
  background: #fff;
}

.site-footer-inner{
  padding: 1.25rem var(--pad);
}

.footer-tagline{
  margin: 0;
}

/* =============================================================================
  Mobile bottom navigation (Search / Identify) - FIXED + SEGMENTED
============================================================================= */

.bottom-nav{
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 70;

  padding: 0.6rem var(--pad) calc(0.6rem + env(safe-area-inset-bottom));

  background: rgba(255,255,255,0.92);
  backdrop-filter: blur(10px);
  border-top: 1px solid var(--border);
}

.bottom-nav-inner{
  max-width: var(--container);
  margin: 0 auto;

  position: relative;
  display: grid;
  grid-template-columns: 1fr 1fr;

  border: 1px solid var(--border);
  background: #fff;
  border-radius: 999px;
  overflow: hidden;

  padding: 0.2rem;
}

.bottom-nav-indicator{
  position: absolute;
  top: 0.2rem;
  bottom: 0.2rem;
  left: 0.2rem;
  width: calc(50% - 0.2rem);

  border-radius: 999px;
  background: rgba(17,24,39,0.06);

  transition: transform 160ms ease;
  pointer-events: none;
}

.bottom-nav[data-active="identify"] .bottom-nav-indicator{
  transform: translateX(100%);
}

.bottom-nav-link{
  position: relative;
  z-index: 1;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  padding: 0.7rem 0.5rem;
  border-radius: 999px;

  text-decoration: none;
  font-weight: 650;
  font-size: 0.95rem;
  color: var(--muted);
}

.bottom-nav-link[aria-current="page"]{
  color: var(--fg);
}

/* Hide the bottom nav on tablet/desktop */
@media (min-width: 720px){
  .bottom-nav{ display: none; }
}
