---
title: Identify a pasta shape
layout: layout.njk
description: "Identify a pasta shape by answering a few quick questions. Mobile-friendly, one question at a time."
---

{# =============================================================================
  identify/index.njk
  ------------------------------------------------------------------------------
  PURPOSE
  - Identify pasta by narrowing down with sequential questions.
  - Mobile-first UI: big tap targets, one question at a time.
  - Show the user how each answer narrows the list using count previews.
  - When matches become small, show a live “Matches” table (helps confidence).
  - When exactly 1 match remains, DO NOT auto-redirect - show a confirmation
    state with a “View details” button so the user can verify or revise.

  IMPORTANT NOTES
  - Identify logic is embedded in this template (existing behavior).
  - No inline CSS - styling remains in /src/css/styles.css.

  CHANGE (RESULTS STANDARDIZATION)
  - Identify "Matches" now renders as an All-Pastas-style TABLE with:
      - Thumb (not sortable)
      - Name (sortable)
      - Category (sortable)
      - Synonyms (hidden on narrow screens via existing CSS rules)
============================================================================= #}

{% from "partials/pasta-results-table.njk" import pastaResultsTable %}

{# -----------------------------------------------------------------------------
  Build identifyData JSON in the template so JS has a compact dataset.
  NOTE: "category" is populated for the results table.
----------------------------------------------------------------------------- #}
{% set identifyData = [] %}
{% for item in pasta %}

  {% set thumbCandidate = (item.ThumbnailImage or "") | replace("<ImageKitPath>", "") | trim %}
  {% set thumbRaw = thumbCandidate if thumbCandidate else (item.Slug ~ ".png") %}

  {% set alsoRaw =
    item.SearchAliases
    or item.Aliases
    or item.Synonyms
    or item.Also
    or item.Misspellings
    or ""
  %}

  {# Category support across schema changes:
     - Prefer "Category" if present, otherwise "Type" (common in your CSV),
       otherwise fall back to blank. #}
  {% set categoryRaw =
    item.Category
    or item.Type
    or item.ShapeCategory
    or item.PastaCategory
    or ""
  %}

  {% set _ = identifyData.push({
    slug: item.Slug,
    name: item.ShapeName,
    category: categoryRaw,
    type: item.Type or "",
    size: item.SizeClass or "",

    hollow: item.IsHollow or "",
    ridged: item.IsRidged or "",
    twisted: item.IsTwisted or "",
    curved: item.IsCurved or "",
    stuffed: item.IsStuffed or "",

    crossSection: item.CrossSection or item.CrossSectionShape or "",
    cutStyle: item.CutStyle or "",
    concave: item.IsConcave or "",
    ruffles: item.HasRuffles or item.IsRuffled or "",
    pastina: item.IsPastina or "",

    also: alsoRaw,
    thumb: thumbRaw
  }) %}
{% endfor %}

<header class="stack tight">
  <h1 class="h1">Identify a pasta shape</h1>
  <p class="muted">Answer one question at a time. You can always tap “Not sure.”</p>
</header>

<section id="identify-app" class="identify">
  <div class="card identify-card">
    <div class="identify-question">
      <p class="identify-kicker muted" id="identify-kicker">Question</p>
      <h2 class="identify-title" id="identify-title">Loading…</h2>
      <p class="identify-help muted" id="identify-help"></p>
    </div>

    <div class="identify-answers" id="identify-answers" aria-live="polite"></div>

    <div class="identify-meta">
      <span class="muted" id="identify-count"></span>
    </div>
  </div>

  {# =============================================================================
    Matches (standardized table)
    - Uses the same table classes as All Pastas / Home results.
    - Sortable headers are wired via the embedded script below.
  ============================================================================= #}
  <div class="identify-results" id="identify-results" hidden>
    <div class="results-head">
      <h2 class="h2">Matches</h2>
      <p class="muted" id="identify-results-count"></p>
    </div>

    {% call pastaResultsTable(
      "identify",
      "table-wrap table-wrap--results",
      "Identify matches table",
      "",
      "",
      "identify-results-table",
      "data-table data-table--results js-sortable-table",
      "Identify matches table",
      "",
      "identify-results-body"
    ) %}
      {# Rows rendered by JS #}
    {% endcall %}
  </div>

  <div class="identify-bottom-bar" role="navigation" aria-label="Identify controls">
    <button class="btn secondary" type="button" id="identify-back" disabled>Back</button>
    <button class="btn secondary" type="button" id="identify-reset">Reset</button>
    <button class="btn" type="button" id="identify-toggle-results" hidden>Show all</button>
  </div>
</section>

<script type="application/json" id="identify-data">
{{ identifyData | dump | safe }}
</script>
