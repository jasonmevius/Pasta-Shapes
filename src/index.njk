---
title: Pasta Shapes
layout: layout.njk
description: "Search pasta shapes by name and aliases, or identify a shape by answering a few quick questions."
---

{# =============================================================================
  index.njk (Homepage)
  ------------------------------------------------------------------------------
  Mobile-first simplified home:

  DEFAULT (idle, no query):
    TOP:    Search by Name (big input)
    BOTTOM: Identify by Shape (entire card is one big button to /identify/)

  ACTIVE SEARCH (user types):
    TOP:    Search card shrinks
    BOTTOM: Identify card disappears and is replaced by live results

  Revisions in this version:
  - Removed Search subtitle sentence.
  - Centered "Search by Name" heading.
  - Centered "Identify by Shape" heading.
  - Identify image now uses favicon.png and is centered in both axes.
  - Removed Identify subtitle and the "Tap anywhere" button.
============================================================================= #}

{# -----------------------------------------------------------------------------
  ImageKit configuration
----------------------------------------------------------------------------- #}
{% set IK_BASE = "https://ik.imagekit.io/mevius" %}
{% set IK_THUMBS_BASE = IK_BASE ~ "/pasta/thumbs/" %}
{% set FALLBACK_THUMB = "pending.png" %}

{# -----------------------------------------------------------------------------
  Identify card image
  - Per your note: use pasta/favicon.png
----------------------------------------------------------------------------- #}
{% set identifyImgUrl = IK_BASE ~ "/pasta/favicon.png?tr=w-512,h-512,f-auto,q-70" %}

<section class="home-shell" aria-label="Homepage actions">
  <div class="home-panels">

    {# =========================================================================
      PANEL 1: Search by Name
    ========================================================================= #}
    <section id="home-search-card" class="home-card card stack" aria-label="Search by name">
      <header class="home-card-head">
        <h1 class="h2 home-card-title">Search by Name</h1>
      </header>

      <form id="pasta-search-form" class="search" action="/" method="get" novalidate>
        <label class="sr-only" for="pasta-q">Search by pasta name</label>
        <input
          id="pasta-q"
          name="q"
          class="search-input"
          type="search"
          inputmode="search"
          autocomplete="off"
          autocapitalize="none"
          spellcheck="false"
          placeholder="Start typing - e.g., ravioli, rigatoni, bucatini"
        />
      </form>

      <p id="pasta-search-status" class="muted home-search-status" aria-live="polite">
        Start typing to see matches.
      </p>
    </section>

    {# =========================================================================
      PANEL 2A: Identify by Shape (idle state)
      - Entire card is one big tap target
      - Image is centered both horizontally and vertically
    ========================================================================= #}
    <a
      id="home-identify-card"
      class="home-card home-card-link card stack"
      href="/identify/"
      aria-label="Identify by Shape - go to Identify page"
    >
      <header class="home-card-head">
        <h2 class="h2 home-card-title">Identify by Shape</h2>
      </header>

      <div class="identify-hero" aria-hidden="true">
        <img
          src="{{ identifyImgUrl }}"
          alt=""
          loading="lazy"
          decoding="async"
        />
      </div>
    </a>

    {# =========================================================================
      PANEL 2B: Results panel (active typing state)
      - Hidden by default; shown when user types
    ========================================================================= #}
    <section
      id="home-results-panel"
      class="home-results card stack"
      aria-label="Search results"
      hidden
    >
      <ul id="pasta-search-suggestions" class="suggestions" aria-label="Suggestions"></ul>

      <div id="recently-viewed-wrap" class="recent-wrap" hidden>
        <h3 class="h3">Recently viewed</h3>
        <p id="recently-viewed" class="muted"></p>
      </div>

      <ul id="pasta-results" class="results-list" aria-label="Pasta results">
        {% for item in pasta %}

          {% set alsoRaw =
            item.SearchAliases
            or item.Aliases
            or item.Synonyms
            or item.Also
            or item.Misspellings
            or ""
          %}

          {# --- Thumbnail normalization (no split filter) --------------------- #}
          {% set thumbRaw = (item.ThumbnailImage or "") | replace("<ImageKitPath>", "") | trim %}
          {% set thumbIsUrl = thumbRaw and thumbRaw.startsWith("http") %}

          {% set thumbClean = thumbRaw %}
          {% if thumbClean %}
            {% set thumbClean = thumbClean | replace("https://ik.imagekit.io/mevius/pasta/thumbs/", "") %}
            {% set thumbClean = thumbClean | replace("https://ik.imagekit.io/mevius/", "") %}
            {% set thumbClean = thumbClean | replace("/pasta/thumbs/", "") %}
            {% set thumbClean = thumbClean | replace("pasta/thumbs/", "") %}
            {% set thumbClean = thumbClean | replace("/thumbs/", "") %}
            {% set thumbClean = thumbClean | replace("thumbs/", "") %}
          {% endif %}

          {% if not thumbRaw %}
            {% set thumbUrl = IK_THUMBS_BASE ~ FALLBACK_THUMB %}
          {% elseif thumbIsUrl %}
            {% set thumbUrl = thumbRaw %}
          {% else %}
            {% set thumbUrl = IK_THUMBS_BASE ~ thumbClean %}
          {% endif %}

          {% set thumbUrlTransformed = thumbUrl ~ "?tr=w-56,h-56,f-auto,q-50" %}

          <li class="result-card" data-slug="{{ item.Slug }}" data-search="">
            <a class="result-link" href="/pasta/{{ item.Slug }}/" data-recent="1">
              <span class="thumb" aria-hidden="true">
                <img
                  src="{{ thumbUrlTransformed }}"
                  alt=""
                  loading="lazy"
                  decoding="async"
                />
              </span>

              <span class="result-body">
                <span class="result-title-row">
                  <span class="result-name">{{ item.ShapeName }}</span>
                </span>

                {% if alsoRaw %}
                  <span class="result-also muted">
                    Also: {{ alsoRaw }}
                  </span>
                {% endif %}
              </span>
            </a>
          </li>
        {% endfor %}
      </ul>

      <div class="results-tools">
        <p id="pasta-results-note" class="muted"></p>
        <button id="pasta-toggle-all" class="btn secondary btn-small" type="button" hidden>
          Next 10
        </button>
      </div>
    </section>

  </div>
</section>
