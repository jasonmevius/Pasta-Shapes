---
title: Pasta Shapes
layout: layout.njk
description: "Search pasta shapes by name and aliases, or identify a shape by answering a few quick questions."
---

{# =============================================================================
  index.njk (Homepage)
  ------------------------------------------------------------------------------
  PURPOSE
  - Homepage with two primary actions:
      1) Search by Name (live filtering)
      2) Identify by Shape (guided questions)
  - Mobile-first layout: big tap targets, simple cards.
  - Home hero rotator: rotates example names + icon in sync.

  IMPORTANT CHANGES (Search fix)
  - Each result <li> now contains:
      - data-name   = display name (for sorting + status)
      - data-search = name + aliases/synonyms (for matching)
    This enables the JS to perform deterministic prefix matching.
  - "Recently viewed / Previously searched" UI removed from homepage.
============================================================================= #}

{% set IK_BASE = "https://ik.imagekit.io/mevius" %}
{% set IK_THUMBS_BASE = IK_BASE ~ "/pasta/thumbs/" %}
{% set FALLBACK_THUMB = "pending.png" %}

{# -----------------------------------------------------------------------------
  Home hero rotator (linked icon + example placeholder)
  - These rotate in sync to reinforce the "name <-> icon" connection.
  - Icon images live in ImageKit at /pasta/carousel/
----------------------------------------------------------------------------- #}
{% set IK_CAROUSEL_BASE = IK_BASE ~ "/pasta/carousel/" %}
{% set homeRotatorNames = [
  "penne",
  "ravioli",
  "fusilli",
  "conchiglie",
  "farfalle",
  "gnocchi",
  "macaroni"
] %}
{% set homeRotatorIconSrcs = [
  IK_CAROUSEL_BASE ~ "penne.png",
  IK_CAROUSEL_BASE ~ "ravioli.png",
  IK_CAROUSEL_BASE ~ "fusilli.png",
  IK_CAROUSEL_BASE ~ "conchiglie.png",
  IK_CAROUSEL_BASE ~ "farfalle.png",
  IK_CAROUSEL_BASE ~ "gnocchi.png",
  IK_CAROUSEL_BASE ~ "ridge-macaroni.png"
] %}

<section class="home-shell" aria-label="Homepage actions">
  <div class="home-panels">

    <section id="home-search-card" class="home-card card stack" aria-label="Search by name">
      <header class="home-card-head">
        <h1 class="h2 home-card-title">Search by Name</h1>
      </header>

      <form id="pasta-search-form" class="search" action="/" method="get" novalidate>
        <label class="sr-only" for="pasta-q">Search by pasta name</label>
        <input
          id="pasta-q"
          name="q"
          class="search-input"
          type="search"
          inputmode="search"
          autocomplete="off"
          autocapitalize="none"
          spellcheck="false"
          placeholder="Start typing - e.g., penne"
          data-rotator-group="homeHero"
          data-placeholder-rotate="1"
          data-placeholder-template="Start typing - e.g., {example}"
          data-placeholder-examples="penne,ravioli,fusilli,conchiglie,farfalle,gnocchi,macaroni"
          data-rotate-interval="2500"
        />
      </form>

      <p id="pasta-search-status" class="muted home-search-status" aria-live="polite">
        Start typing to see matches.
      </p>
    </section>

    <a
      id="home-identify-card"
      class="home-card home-card-link card stack"
      href="/identify/"
      aria-label="Identify by Shape - go to Identify page"
    >
      <header class="home-card-head">
        <h2 class="h2 home-card-title">Identify by Shape</h2>
      </header>

      <div class="identify-hero" aria-hidden="true">
        <img
          id="identify-icon-rotator"
          class="identify-icon"
          src="{{ homeRotatorIconSrcs[0] }}"
          alt=""
          loading="lazy"
          decoding="async"
          width="96"
          height="96"
          data-rotator-group="homeHero"
          data-rotate="1"
          data-rotate-srcs="{{ homeRotatorIconSrcs | join(',') }}"
          data-rotate-names="{{ homeRotatorNames | join(',') }}"
          data-rotate-interval="2500"
          data-rotate-fade="240"
        />
      </div>
    </a>

    <section
      id="home-results-panel"
      class="home-results card stack"
      aria-label="Search results"
      hidden
    >
      <ul id="pasta-search-suggestions" class="suggestions" aria-label="Suggestions"></ul>

      <ul id="pasta-results" class="results-list" aria-label="Pasta results">
        {% for item in pasta %}

          {# ---------------------------------------------------------------------
            Build a consolidated "also" string for display + search.
            - This data is used as a matching surface for synonyms/aliases.
          --------------------------------------------------------------------- #}
          {% set alsoRaw =
            item.SearchAliases
            or item.Aliases
            or item.Synonyms
            or item.Also
            or item.Misspellings
            or ""
          %}

          {# ---------------------------------------------------------------------
            Thumbnail selection logic (kept consistent with prior working versions)
          --------------------------------------------------------------------- #}
          {% set thumbRaw = (item.ThumbnailImage or "") | replace("<ImageKitPath>", "") | trim %}
          {% set thumbIsUrl = thumbRaw and thumbRaw.startsWith("http") %}

          {% set thumbClean = thumbRaw %}
          {% if thumbClean %}
            {% set thumbClean = thumbClean | replace("https://ik.imagekit.io/mevius/pasta/thumbs/", "") %}
            {% set thumbClean = thumbClean | replace("https://ik.imagekit.io/mevius/", "") %}
            {% set thumbClean = thumbClean | replace("/pasta/thumbs/", "") %}
            {% set thumbClean = thumbClean | replace("pasta/thumbs/", "") %}
            {% set thumbClean = thumbClean | replace("/thumbs/", "") %}
            {% set thumbClean = thumbClean | replace("thumbs/", "") %}
          {% endif %}

          {% if not thumbRaw %}
            {% set thumbUrl = IK_THUMBS_BASE ~ FALLBACK_THUMB %}
          {% elseif thumbIsUrl %}
            {% set thumbUrl = thumbRaw %}
          {% else %}
            {% set thumbUrl = IK_THUMBS_BASE ~ thumbClean %}
          {% endif %}

          {% set thumbUrlTransformed = thumbUrl ~ "?tr=w-56,h-56,f-auto,q-50" %}

          {# ---------------------------------------------------------------------
            IMPORTANT: data attributes for deterministic search behavior.

            data-name   = the pasta name used for sorting + display logic.
            data-search = "name + alsoRaw" used for synonym token prefix matching.
          --------------------------------------------------------------------- #}
          <li
            class="result-card"
            data-slug="{{ item.Slug }}"
            data-name="{{ item.ShapeName }}"
            data-search="{{ item.ShapeName }} {{ alsoRaw }}"
          >
            <a class="result-link" href="/pasta/{{ item.Slug }}/">
              <span class="thumb" aria-hidden="true">
                <img
                  src="{{ thumbUrlTransformed }}"
                  alt=""
                  loading="lazy"
                  decoding="async"
                />
              </span>

              <span class="result-body">
                <span class="result-title-row">
                  <span class="result-name">{{ item.ShapeName }}</span>
                </span>

                {% if alsoRaw %}
                  <span class="result-also muted">
                    Also: {{ alsoRaw }}
                  </span>
                {% endif %}
              </span>
            </a>
          </li>
        {% endfor %}
      </ul>

      <div class="results-tools">
        <p id="pasta-results-note" class="muted"></p>
        <button id="pasta-toggle-all" class="btn secondary btn-small" type="button" hidden>
          Next 10
        </button>
      </div>

      {# NOTE: "Recently viewed / Previously searched" intentionally removed. #}
    </section>

  </div>
</section>
