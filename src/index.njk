---
title: Pasta Shapes
layout: layout.njk
description: "Search pasta shapes by name and aliases, or identify a shape by answering a few quick questions."
---

{# =============================================================================
  /src/index.njk (Homepage)
  ------------------------------------------------------------------------------
  PURPOSE
  - Homepage is the Search page.
  - Search filters the results table as the user types.
  - Identify card links to /identify/.

  IMPORTANT
  - Two JS layers may run on this page:
      1) /src/js/scripts.js
         - Filters table results (prefix matching)
         - Handles sorting + paging
         - Keeps Identify card visible
      2) /src/js/pasta-search.js (optional include)
         - Suggestions + exact match redirect + fuzzy fallback

  STATUS LINES
  - #pasta-search-status: owned by pasta-search.js (typeahead messaging)
  - #pasta-search-count : owned by scripts.js (table filter counts)

  IMAGEKIT
  - Use the same ImageKit base path pattern as the rest of the site:
      paths.imagekitBase (preferred)
    with a safe fallback to your known ImageKit endpoint.
============================================================================= #}

{# Preferred ImageKit base from your Eleventy global paths object #}
{% set IK_BASE = (paths.imagekitBase | default("https://ik.imagekit.io/mevius")) %}
{% set IK_THUMBS_BASE = IK_BASE ~ "/pasta/thumbs/" %}
{% set IK_CAROUSEL_BASE = IK_BASE ~ "/pasta/carousel/" %}
{% set FALLBACK_THUMB = "pending.png" %}

{# -----------------------------------------------------------------------------
  Home rotator fallbacks
  - If your build provides homeRotatorIconSrcs/homeRotatorNames, use them.
  - Otherwise, use a safe set.
----------------------------------------------------------------------------- #}
{% set fallbackRotatorIconSrcs = [
  IK_CAROUSEL_BASE ~ "penne.png",
  IK_CAROUSEL_BASE ~ "ravioli.png",
  IK_CAROUSEL_BASE ~ "fusilli.png",
  IK_CAROUSEL_BASE ~ "conchiglie.png",
  IK_CAROUSEL_BASE ~ "farfalle.png",
  IK_CAROUSEL_BASE ~ "pasta.png",
  IK_CAROUSEL_BASE ~ "gnocchi.png",
  IK_CAROUSEL_BASE ~ "macaroni.png"
] %}

{% set fallbackRotatorNames = [
  "penne",
  "ravioli",
  "fusilli",
  "conchiglie",
  "farfalle",
  "pasta",
  "gnocchi",
  "macaroni"
] %}

{% set rotatorIconSrcs = (homeRotatorIconSrcs | default([])) %}
{% set rotatorNames = (homeRotatorNames | default([])) %}

{% if rotatorIconSrcs | length == 0 %}
  {% set rotatorIconSrcs = fallbackRotatorIconSrcs %}
{% endif %}
{% if rotatorNames | length == 0 %}
  {% set rotatorNames = fallbackRotatorNames %}
{% endif %}

{% set firstRotatorIcon = rotatorIconSrcs[0] | default(fallbackRotatorIconSrcs[0]) %}

<section class="home-panels">

  {# ===========================================================================
    CARD 1 - SEARCH BY NAME
  =========================================================================== #}
  <section id="home-search-card" class="home-card card stack" aria-label="Search by name">
    <header class="home-card-head">
      <h1 class="h2 home-card-title">Search by Name</h1>
    </header>

    <form id="pasta-search-form" class="search" action="/" method="get" novalidate>
      <label class="sr-only" for="pasta-q">Search by pasta name</label>
      <input
        id="pasta-q"
        name="q"
        class="search-input"
        type="search"
        inputmode="search"
        autocomplete="off"
        autocapitalize="none"
        spellcheck="false"
        placeholder="Start typing - e.g., penne"
        data-rotator-group="homeHero"
        data-placeholder-rotate="1"
        data-placeholder-template="Start typing - e.g., {example}"
        data-placeholder-examples="penne,ravioli,fusilli,conchiglie,farfalle,gnocchi,macaroni"
        data-rotate-interval="2500"
      />
    </form>

    {# pasta-search.js writes typeahead messages here (optional) #}
    <p id="pasta-search-status" class="muted home-search-status" aria-live="polite"></p>

    {# scripts.js writes table-filter counts here #}
    <p id="pasta-search-count" class="muted home-search-count" aria-live="polite">
      Start typing to see matches.
    </p>
  </section>

  {# ===========================================================================
    CARD 2 - IDENTIFY BY SHAPE (always visible and clickable)
  =========================================================================== #}
  <a
    id="home-identify-card"
    class="home-card home-card-link card stack"
    href="/identify/"
    aria-label="Identify by Shape - go to Identify page"
  >
    <header class="home-card-head">
      <h2 class="h2 home-card-title">Identify by Shape</h2>
    </header>

    <div class="identify-hero" aria-hidden="true">
      <img
        id="identify-icon-rotator"
        class="identify-icon"
        src="{{ firstRotatorIcon }}"
        alt=""
        loading="lazy"
        decoding="async"
        width="96"
        height="96"
        data-rotator-group="homeHero"
        data-rotate="1"
        data-rotate-srcs="{{ rotatorIconSrcs | join(',') }}"
        data-rotate-names="{{ rotatorNames | join(',') }}"
        data-rotate-interval="2500"
        data-rotate-fade="240"
      />
    </div>
  </a>

  {# ===========================================================================
    RESULTS PANEL - hidden until user types
  =========================================================================== #}
  <section
    id="home-results-panel"
    class="home-results card stack"
    aria-label="Search results"
    hidden
  >
    {# Used by pasta-search.js for suggestions; harmless if empty #}
    <ul id="pasta-search-suggestions" class="suggestions" aria-label="Suggestions"></ul>

    <p id="pasta-results-note" class="note" hidden>
      Matches are prefix-based (e.g., “p” matches “penne”).
    </p>

    <div class="table-wrap table-wrap--results">
      <div class="table-scroll">
        <table
          id="pasta-results-table"
          class="data-table data-table--results"
          aria-label="Pasta results table"
        >
          <colgroup>
            <col class="col-thumb" />
            <col class="col-name" />
            <col class="col-category" />
            <col class="col-synonyms" />
          </colgroup>

          <thead>
            <tr>
              <th scope="col" class="data-table__thumb"></th>

              {# -----------------------------------------------------------------
                SORTABLE HEADER CONTROLS
                - We render a button inside the th so:
                    1) it’s an obvious tap/click target
                    2) your existing CSS patterns for “sortable header” are more
                       likely to apply
                - scripts.js will listen for clicks on .js-sort
              ------------------------------------------------------------------ #}
              <th scope="col" class="data-table__name" data-sort="name" aria-sort="ascending">
                <button type="button" class="sort-btn js-sort" data-sort="name">
                  Name
                </button>
              </th>

              <th scope="col" class="cell-category" data-sort="category" aria-sort="none">
                <button type="button" class="sort-btn js-sort" data-sort="category">
                  Category
                </button>
              </th>

              <th scope="col" class="cell-synonyms">
                Synonyms
              </th>
            </tr>
          </thead>

          <tbody id="pasta-results-body">
            {% for item in pasta %}

              {% set alsoRaw = (item.Synonyms or item.SearchAliases or "") %}
              {% set categoryRaw = (item.Category or "") %}

              {# -----------------------------------------------------------------
                THUMBNAIL SOURCE LOGIC
                - Many of your CSV rows store just a filename (e.g. bucatini.png)
                - Some might store a full URL (rare, but safe to support)
                - We build the final URL accordingly
              ------------------------------------------------------------------ #}
              {% set thumbFile = (item.ThumbFile or item.ImageFile or FALLBACK_THUMB) %}
              {% set thumbIsUrl = (thumbFile and (thumbFile | lower | slice(0, 4) == "http")) %}
              {% set thumbUrl = thumbFile if thumbIsUrl else (IK_THUMBS_BASE ~ thumbFile) %}
              {% set thumbUrlTransformed = thumbUrl ~ "?tr=w-56,h-56,f-auto,q-50" %}

              <tr
                class="data-row"
                data-slug="{{ item.Slug }}"
                data-name="{{ item.ShapeName }}"
                data-category="{{ categoryRaw }}"
                data-search="{{ item.ShapeName }} {{ alsoRaw }}"
              >
                <td class="data-table__thumb">
                  <span class="thumb" aria-hidden="true">
                    <img
                      src="{{ thumbUrlTransformed }}"
                      alt=""
                      loading="lazy"
                      decoding="async"
                      width="56"
                      height="56"
                    />
                  </span>
                </td>

                <th scope="row" class="data-table__name">
                  <a href="/pasta/{{ item.Slug }}/">{{ item.ShapeName }}</a>
                </th>

                <td class="cell-category">{{ categoryRaw }}</td>

                <td class="cell-synonyms">
                  {% if alsoRaw %}
                    {{ alsoRaw }}
                  {% else %}
                    <span class="muted">-</span>
                  {% endif %}
                </td>
              </tr>

            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <a id="pasta-toggle-all" class="btn btn--ghost" href="#" hidden>
      Next 10
    </a>
  </section>

</section>
