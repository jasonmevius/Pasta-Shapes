---
title: Pasta Shapes
layout: layout.njk
description: "Search pasta shapes by name and aliases, or identify a shape by answering a few quick questions."
---

{# =============================================================================
  /src/index.njk (Homepage)
  ------------------------------------------------------------------------------
  PURPOSE
  - Homepage is the Search page.
  - Two primary actions:
      1) Search by Name (live filtering of the results table)
      2) Identify by Shape (link to Identify flow)

  IMPORTANT BEHAVIOR NOTES
  - This homepage supports TWO parallel search UX layers:
      A) Table filtering (fast prefix matching) - /src/js/scripts.js
      B) Typeahead suggestions + redirect/fuzzy fallback - /src/js/pasta-search.js

  - To prevent the two scripts from clobbering each other's status text, we use:
      - #pasta-search-status (typeahead messaging - owned by pasta-search.js)
      - #pasta-search-count  (table-filter count - owned by scripts.js)

  BUILD SAFETY NOTE
  - Some pages/build contexts may not provide homeRotatorIconSrcs/homeRotatorNames.
  - We defensively default them to empty arrays and provide fallbacks so Nunjucks
    never tries to call .join() or [0] on undefined.
============================================================================= #}

{% set IK_BASE = "https://ik.imagekit.io/mevius" %}
{% set IK_THUMBS_BASE = IK_BASE ~ "/pasta/thumbs/" %}
{% set IK_CAROUSEL_BASE = IK_BASE ~ "/pasta/carousel/" %}
{% set FALLBACK_THUMB = "pending.png" %}

{# ---------------------------------------------------------------------------
  HOME ROTATOR FALLBACKS
  - If your global data file defines homeRotatorIconSrcs/homeRotatorNames,
    those will be used.
  - Otherwise we fall back to a safe, known set.
--------------------------------------------------------------------------- #}

{% set fallbackRotatorIconSrcs = [
  IK_CAROUSEL_BASE ~ "penne.png",
  IK_CAROUSEL_BASE ~ "ravioli.png",
  IK_CAROUSEL_BASE ~ "fusilli.png",
  IK_CAROUSEL_BASE ~ "conchiglie.png",
  IK_CAROUSEL_BASE ~ "farfalle.png",
  IK_CAROUSEL_BASE ~ "pasta.png",
  IK_CAROUSEL_BASE ~ "gnocchi.png",
  IK_CAROUSEL_BASE ~ "macaroni.png"
] %}

{% set fallbackRotatorNames = [
  "penne",
  "ravioli",
  "fusilli",
  "conchiglie",
  "farfalle",
  "pasta",
  "gnocchi",
  "macaroni"
] %}

{# Default undefined variables to empty arrays, then choose fallback if empty #}
{% set rotatorIconSrcs = (homeRotatorIconSrcs | default([])) %}
{% set rotatorNames = (homeRotatorNames | default([])) %}

{% if rotatorIconSrcs | length == 0 %}
  {% set rotatorIconSrcs = fallbackRotatorIconSrcs %}
{% endif %}

{% if rotatorNames | length == 0 %}
  {% set rotatorNames = fallbackRotatorNames %}
{% endif %}

{# Final first icon fallback for <img src="..."> #}
{% set firstRotatorIcon = rotatorIconSrcs[0] | default(fallbackRotatorIconSrcs[0]) %}

<section class="home-panels">

  {# ===========================================================================
    CARD 1 - SEARCH BY NAME
  =========================================================================== #}
  <section id="home-search-card" class="home-card card stack" aria-label="Search by name">
    <header class="home-card-head">
      <h1 class="h2 home-card-title">Search by Name</h1>
    </header>

    {# -------------------------------------------------------------------------
      NOTE
      - pasta-search.js expects:
          form#pasta-search-form
          input#pasta-q
          p#pasta-search-status
          ul#pasta-search-suggestions
      - scripts.js expects:
          input#pasta-q
          p#pasta-search-count (or falls back to #pasta-search-status)
          results table elements
    -------------------------------------------------------------------------- #}
    <form id="pasta-search-form" class="search" action="/" method="get" novalidate>
      <label class="sr-only" for="pasta-q">Search by pasta name</label>

      <input
        id="pasta-q"
        name="q"
        class="search-input"
        type="search"
        inputmode="search"
        autocomplete="off"
        autocapitalize="none"
        spellcheck="false"
        placeholder="Start typing - e.g., penne"
        data-rotator-group="homeHero"
        data-placeholder-rotate="1"
        data-placeholder-template="Start typing - e.g., {example}"
        data-placeholder-examples="penne,ravioli,fusilli,conchiglie,farfalle,gnocchi,macaroni"
        data-rotate-interval="2500"
      />
    </form>

    {# Status line for pasta-search.js (typeahead + exact match messaging) #}
    <p id="pasta-search-status" class="muted home-search-status" aria-live="polite"></p>

    {# Count line for scripts.js (table filter counts) #}
    <p id="pasta-search-count" class="muted home-search-count" aria-live="polite">
      Start typing to see matches.
    </p>
  </section>

  {# ===========================================================================
    CARD 2 - IDENTIFY BY SHAPE (always clickable)
  =========================================================================== #}
  <a
    id="home-identify-card"
    class="home-card home-card-link card stack"
    href="/identify/"
    aria-label="Identify by Shape - go to Identify page"
  >
    <header class="home-card-head">
      <h2 class="h2 home-card-title">Identify by Shape</h2>
    </header>

    <div class="identify-hero" aria-hidden="true">
      <img
        id="identify-icon-rotator"
        class="identify-icon"
        src="{{ firstRotatorIcon }}"
        alt=""
        loading="lazy"
        decoding="async"
        width="96"
        height="96"
        data-rotator-group="homeHero"
        data-rotate="1"
        data-rotate-srcs="{{ rotatorIconSrcs | join(',') }}"
        data-rotate-names="{{ rotatorNames | join(',') }}"
        data-rotate-interval="2500"
        data-rotate-fade="240"
      />
    </div>
  </a>

  {# ===========================================================================
    RESULTS PANEL (hidden until user types)
  =========================================================================== #}
  <section
    id="home-results-panel"
    class="home-results card stack"
    aria-label="Search results"
    hidden
  >
    {# Used by pasta-search.js for suggestions. Safe to exist even if empty. #}
    <ul id="pasta-search-suggestions" class="suggestions" aria-label="Suggestions"></ul>

    <p id="pasta-results-note" class="note" hidden>
      Matches are prefix-based (e.g., “p” matches “penne”).
    </p>

    <div class="table-wrap table-wrap--results">
      <div class="table-scroll">
        <table
          id="pasta-results-table"
          class="data-table data-table--results js-sortable-table"
          aria-label="Pasta results table"
        >
          <colgroup>
            <col class="col-thumb" />
            <col class="col-name" />
            <col class="col-category" />
            <col class="col-synonyms" />
          </colgroup>

          <thead>
            <tr>
              <th scope="col" class="data-table__thumb"></th>
              <th scope="col" class="data-table__name" data-sort="name" aria-sort="ascending">
                Name
              </th>
              <th scope="col" class="cell-category" data-sort="category" aria-sort="none">
                Category
              </th>
              <th scope="col" class="cell-synonyms">
                Synonyms
              </th>
            </tr>
          </thead>

          <tbody id="pasta-results-body">
            {% for item in pasta %}

              {# Synonyms/search aliases shown and used for data-search tokenization #}
              {% set alsoRaw = (item.Synonyms or item.SearchAliases or "") %}
              {% set categoryRaw = (item.Category or "") %}

              {# Thumbnail logic #}
              {% set thumbFile = (item.ThumbFile or item.ImageFile or FALLBACK_THUMB) %}
              {% set thumbUrl = IK_THUMBS_BASE ~ thumbFile %}
              {% set thumbUrlTransformed = thumbUrl ~ "?tr=w-56,h-56,f-auto,q-50" %}

              <tr
                class="data-row"
                data-slug="{{ item.Slug }}"
                data-name="{{ item.ShapeName }}"
                data-category="{{ categoryRaw }}"
                data-search="{{ item.ShapeName }} {{ alsoRaw }}"
              >
                <td class="data-table__thumb">
                  <span class="thumb" aria-hidden="true">
                    <img
                      src="{{ thumbUrlTransformed }}"
                      alt=""
                      loading="lazy"
                      decoding="async"
                      width="56"
                      height="56"
                    />
                  </span>
                </td>

                <th scope="row" class="data-table__name">
                  <a href="/pasta/{{ item.Slug }}/">{{ item.ShapeName }}</a>
                </th>

                <td class="cell-category">{{ categoryRaw }}</td>

                <td class="cell-synonyms">
                  {% if alsoRaw %}
                    {{ alsoRaw }}
                  {% else %}
                    <span class="muted">-</span>
                  {% endif %}
                </td>
              </tr>

            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <a id="pasta-toggle-all" class="btn btn--ghost" href="#" hidden>
      Next 10
    </a>
  </section>

</section>
